# ========== 数据库配置 ==========
# MySQL 格式: mysql+asyncmy://用户:密码@host:port/库名?charset=utf8mb4
DATABASE_URL=mysql+asyncmy://myroot123456:7UpB4oO43LtTIL7v@mysql7.sqlpub.com:3312/dbdrservice?charset=utf8mb4

# ========== Redis 配置 ==========
# Redis URL（支持 Redis 和 Upstash）
REDIS_URL=rediss://default:AcbWAAIncDJiYzExMmU0MzFmZDE0MDkyYjgzOTEzYjliOWE3ZjVkOXAyNTA5MDI@ample-krill-50902.upstash.io:6379

# Celery 配置（使用 Redis 作为消息队列）
CELERY_BROKER_URL=rediss://default:AcbWAAIncDJiYzExMmU0MzFmZDE0MDkyYjgzOTEzYjliOWE3ZjVkOXAyNTA5MDI@ample-krill-50902.upstash.io:6379
CELERY_RESULT_BACKEND=rediss://default:AcbWAAIncDJiYzExMmU0MzFmZDE0MDkyYjgzOTEzYjliOWE3ZjVkOXAyNTA5MDI@ample-krill-50902.upstash.io:6379

# ========== 向量数据库配置 ==========
# 向量数据库类型: zilliz | qdrant
VECTOR_DB_TYPE=zilliz

# Zilliz Cloud 配置（VECTOR_DB_TYPE=zilliz 时使用）
ZILLIZ_URI=https://in03-53b26151fea6d07.serverless.ali-cn-hangzhou.cloud.zilliz.com.cn
ZILLIZ_TOKEN=cfb795630ab46f6d81bd8139a45588ee18f8b631c7c313135e5b0cddab34fee147b264660dbceb5c5663d3912975c5f85b3a518e
ZILLIZ_COLLECTION_NAME=test_multi_context
ZILLIZ_DIM=2560

# Qdrant 配置（VECTOR_DB_TYPE=qdrant 时使用）
QDRANT_URL=
QDRANT_API_KEY=

# ========== MinIO 对象存储配置 ==========
MINIO_ENDPOINT=play.min.io
MINIO_ACCESS_KEY=Q3AM3UQ867SPQQA43P2F
MINIO_SECRET_KEY=zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG
MINIO_SECURE=true
MINIO_BUCKET_NAME=rag-files

# ========== 应用安全配置 ==========
SECRET_KEY=your-secret-key-change-in-production
JWT_SECRET_KEY=your-jwt-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=10080

# ========== AI 模型配置 ==========
# 是否使用阿里云百炼平台（true/false）
USE_DASHSCOPE=true

# 阿里云百炼平台配置
DASHSCOPE_API_KEY=sk-facd0ca4f5ae4fada1706bf3938b69d9
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1

# OpenAI 兼容接口配置（USE_DASHSCOPE=false 时使用，或作为备用）
OPENAI_API_KEY=sk-facd0ca4f5ae4fada1706bf3938b69d9
OPENAI_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1

# 模型名称
# Embedding 模型: text-embedding-v4, text-embedding-v3, text-embedding-v2, text-embedding-v1
EMBEDDING_MODEL=qwen3-vl-embedding
# LLM 模型: qwen-plus, qwen-max, qwen-turbo, qwen3-vl-plus 等
LLM_MODEL=qwen3-vl-plus
# 图片 OCR 模型（阿里百炼）
OCR_MODEL=qwen-vl-ocr-2025-11-20

# 本地模型配置（可选，用于本地部署）
LOCAL_EMBEDDING_MODEL=m3e-base
LOCAL_LLM_MODEL=qwen2.5-7b
LOCAL_MODEL_BASE_URL=http://localhost:11434

# ========== 文件上传配置 ==========
MAX_FILE_SIZE=104857600
ALLOWED_FILE_TYPES=pdf,ppt,pptx,txt,xlsx,docx,jpeg,jpg,png

# ========== 对话历史配置 ==========
CHAT_HISTORY_MAX_COUNT=100
CHAT_HISTORY_DEFAULT_COUNT=50
CHAT_CONTEXT_MESSAGE_COUNT=5

# ========== RAG 检索配置 ==========
RAG_CONFIDENCE_THRESHOLD=0.6
# Rerank 模型
RERANK_MODEL=qwen3-rerank
# RRF 混合打分的 k 值（常见值为 60）
RRF_K=60
# 混合检索
RAG_USE_BM25=true
# 多查询
RAG_QUERY_EXPAND=true
RAG_QUERY_EXPAND_COUNT=2
# 窗口扩展（0=关闭）
RAG_CONTEXT_WINDOW_EXPAND=1

# ========== 文本分块配置 ==========
# 目标块大小（字符数）
CHUNK_SIZE=500
# 重叠字符数
CHUNK_OVERLAP=50
# 最大扩展比例（允许超出 chunk_size 的最大倍数，用于保持句子完整性）
CHUNK_MAX_EXPAND_RATIO=1.3

# ========== 日志配置 ==========
LOG_LEVEL=INFO
