# 价格策略文档

## 1. 定价模型

### 1.1 套餐模式（推荐）

采用订阅制套餐模式，提供不同等级的套餐供用户选择。

#### 免费版（Free）
- **价格**：免费
- **功能限制**：
  - 文件上传：10个/月
  - 存储空间：100MB
  - 问答次数：100次/月
  - 单文件大小：10MB
  - 知识库数量：1个
- **适用对象**：个人用户、试用用户

#### 基础版（Basic）
- **价格**：¥99/月 或 ¥999/年（节省17%）
- **功能限制**：
  - 文件上传：100个/月
  - 存储空间：5GB
  - 问答次数：1000次/月
  - 单文件大小：50MB
  - 知识库数量：5个
  - 支持批量上传
- **适用对象**：小型团队、个人专业用户

#### 专业版（Professional）
- **价格**：¥299/月 或 ¥2999/年（节省17%）
- **功能限制**：
  - 文件上传：500个/月
  - 存储空间：50GB
  - 问答次数：10000次/月
  - 单文件大小：100MB
  - 知识库数量：20个
  - 支持批量上传
  - API访问
  - 优先技术支持
- **适用对象**：中型企业、专业团队

#### 企业版（Enterprise）
- **价格**：¥999/月起（按需定制）
- **功能限制**：
  - 文件上传：无限
  - 存储空间：无限
  - 问答次数：无限
  - 单文件大小：500MB
  - 知识库数量：无限
  - 支持批量上传
  - API访问
  - 专属技术支持
  - 私有化部署（可选）
  - 定制开发
  - SLA保障
- **适用对象**：大型企业、政府机构

### 1.2 按量付费模式（可选）

对于超出套餐限制的使用，提供按量付费选项。

#### 超出套餐计费标准

**文件上传**
- 超出部分：¥0.5/个

**存储空间**
- 超出部分：¥0.1/GB/月

**问答次数**
- 超出部分：¥0.1/次（简单问题）
- 超出部分：¥0.3/次（复杂问题，使用高级模型）

**Token计费**（API调用）
- 输入Token：¥0.002/1K tokens
- 输出Token：¥0.006/1K tokens

## 2. 成本计算

### 2.1 成本构成

**基础设施成本**
- 服务器：¥500-2000/月（根据规模）
- 存储：¥100-500/月
- CDN：¥200-1000/月
- 数据库：¥300-800/月

**AI模型成本**
- Embedding模型：¥0.0001/次（本地）或 ¥0.001/次（API）
- LLM模型：¥0.01-0.1/次（根据模型）
- OCR模型：¥0.001/次（本地）

**运营成本**
- 人力成本
- 营销成本
- 客服成本

### 2.2 定价策略

**成本加成法**
- 基础版：成本 × 3
- 专业版：成本 × 4
- 企业版：成本 × 5

**竞争定价法**
- 参考竞品价格
- 提供更具竞争力的价格

**价值定价法**
- 根据用户价值定价
- 提供差异化功能

## 3. 计费实现

### 3.1 使用量统计

**文件上传**
- 统计上传文件数量
- 统计文件大小
- 按月重置

**存储空间**
- 实时统计用户存储空间
- 包含文件大小和向量数据大小
- 按月计费

**问答次数**
- 统计每次问答请求
- 区分简单问题和复杂问题
- 按月重置

**Token统计**
- 统计输入Token数
- 统计输出Token数
- 实时扣费

### 3.2 计费流程

```
用户操作
  ↓
记录使用量（usage_records表）
  ↓
检查套餐限制
  ↓
如果超出限制：
  - 提示升级套餐
  - 或按量付费
  ↓
扣费（credits字段）
  ↓
生成账单记录
```

### 3.3 账单生成

**账单周期**
- 按月生成账单
- 账单日期：每月1日

**账单内容**
- 套餐费用
- 超出费用
- 使用明细
- 支付状态

## 4. 支付集成

### 4.1 支付方式

**在线支付**
- 支付宝
- 微信支付
- 银联支付

**企业支付**
- 银行转账
- 对公账户
- 发票开具

### 4.2 支付流程

```
用户选择套餐
  ↓
生成订单
  ↓
跳转支付页面
  ↓
支付成功回调
  ↓
激活套餐
  ↓
发送确认邮件
```

## 5. 优惠策略

### 5.1 新用户优惠
- 注册即送7天专业版试用
- 首次付费9折优惠

### 5.2 长期订阅优惠
- 年付优惠：17%折扣
- 两年付优惠：25%折扣

### 5.3 推荐奖励
- 推荐新用户注册：双方各得1个月免费
- 推荐付费用户：推荐人得10%返现

### 5.4 企业批量优惠
- 10人以上：8折
- 50人以上：7折
- 100人以上：6折

## 6. 退款政策

### 6.1 退款条件
- 7天内无条件退款
- 因系统故障导致的损失全额退款
- 未使用的套餐按比例退款

### 6.2 退款流程
- 用户申请退款
- 审核（1-3个工作日）
- 退款到账（3-7个工作日）

## 7. 价格调整策略

### 7.1 价格调整原则
- 提前30天通知用户
- 现有用户价格保护期：6个月
- 新功能可能单独收费

### 7.2 价格调整流程
- 成本分析
- 市场调研
- 内部讨论
- 用户通知
- 执行调整

## 8. 财务报表

### 8.1 收入统计
- 按套餐统计收入
- 按时间统计收入
- 按用户类型统计收入

### 8.2 成本统计
- 基础设施成本
- AI模型成本
- 人力成本
- 营销成本

### 8.3 利润分析
- 毛利率
- 净利率
- 用户生命周期价值（LTV）
- 获客成本（CAC）

## 9. 数据库设计

### 9.1 plans表（套餐表）
见架构设计文档

### 9.2 subscriptions表（订阅表）
```sql
CREATE TABLE subscriptions (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    plan_id INTEGER REFERENCES plans(id),
    status VARCHAR(20) DEFAULT 'active',
    start_date DATE NOT NULL,
    end_date DATE NOT NULL,
    auto_renew BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 9.3 orders表（订单表）
```sql
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    plan_id INTEGER REFERENCES plans(id),
    order_no VARCHAR(50) UNIQUE NOT NULL,
    amount DECIMAL(10, 2) NOT NULL,
    status VARCHAR(20) DEFAULT 'pending',
    payment_method VARCHAR(20),
    payment_id VARCHAR(100),
    paid_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 9.4 invoices表（发票表）
```sql
CREATE TABLE invoices (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    order_id INTEGER REFERENCES orders(id),
    invoice_no VARCHAR(50) UNIQUE NOT NULL,
    amount DECIMAL(10, 2) NOT NULL,
    tax_amount DECIMAL(10, 2) DEFAULT 0,
    total_amount DECIMAL(10, 2) NOT NULL,
    status VARCHAR(20) DEFAULT 'pending',
    issued_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```
